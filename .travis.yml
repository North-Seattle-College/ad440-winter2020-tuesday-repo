language: node_js
node_js:
  - 12.16.1

#stores npm data to speed up ci
cache: npm

#only updates on commits from this branch, develop and master
branches:
  only:
    - master
    - develop
    - sto-ci-westus2

jobs:
  include:
    # -------------------------------------------------------------------------
    - stage: test storage and update static web build
      script:
        - echo "skip testing"
        - unset CI
      before deploy:
        - cd ui
        - echo $PWD
      deploy:
        provider: azure_web_apps
        username: AZ_WEBAPP_LOGIN_NAME
        password: AZ_WEBAPP_PASSWORD
        site: PoG-WebApp
        local_dir: ui
        on:
          - sto-ci-westus2
    # -------------------------------------------------------------------------
    # -stage: change directory back to root
    #   after script:
    #     - cd ..
    # -------------------------------------------------------------------------
    # stage
    # -------------------------------------------------------------------------
    # stage
    # -------------------------------------------------------------------------

language: node_js
node_js:
  - 12.16.1

#stores npm data to speed up ci
cache: npm

#only updates on commits from this branch, develop and master
branches:
  only:
    - master
    - develop
    - sto-ci-westus2

jobs:
  include:
    # this is the stage that test the storage build
    - stage: test storage and update static web build (virtual)
      before install: cd ui
      script:
        - unset CI
        # - npm run build  #build the current UI storage for displying in browser
      deploy:
        provider: azure_web_apps
        username: AZ_WEBAPP_LOGIN_NAME
        password: AZ_WEBAPP_PASSWORD
        site: PoG-WebApp
      # after script:
      #   - cd ..
    # stage
    # stage
